task :prebuild do |t, args|
	ljlib = ((args[:buildtarget].cfg.to_sym == :debug) ?
		"-lluajit-5.1" : "-lluajit-5.1");
	args[:buildtarget].exlibs.push(ljlib)
	args[:buildtarget].exlibs.push("-ldl")
end
LIBNAME="yue.so"
task :lib do |t, args|
	libpath = args[:builddir].path + "/" + LIBNAME
	sh "#{CC} -shared -o #{libpath} #{args[:buildtarget].libobjs.join(' ')} -lstdc++ #{args[:buildtarget].exlibs.join(' ')}"
end
