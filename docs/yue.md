yue: brand-new server frame work for real time statefull network application with complex system
==================================================================================================

# Motivation
- ## プロジェクトを始めた理由と達成したいこと
- ## 革新的な仕様を実装したMMOの開発があまり行われなくなったことはMMOというゲームのジャンルが発展していく際の大きな問題であるという思いがあった
- ## 革新的な仕様を中心にして実装した場合、失敗した時のリスクが大きいことがそういった開発が行われなくなった理由
- ## リスクが大きいのはMMOの開発の難度が高いこと、開始するために大きな初期投資が必要なこと
- ## MMOの開発の難度を下げ、small startを可能にすることで革新的なMMOが再び登場するようにしたい
- ## 技術的にはMMOの開発だけでなくいろいろな応用の可能性があると考えている（後述）

# 何を解決するのか
- ## 開発の難しさ。主に２つ
- ### 常時接続であることによるクライアントの状態管理
- ### サーバー側の分散処理

# どうやって解決するのか
- ## RPC
- ## 超使いやすいRPCフレームワークを提供することでネットワークプログラミングを徹底的に楽にする（ここまで実装済み）
- ## SPLAYという研究がある（科学計算の開発効率を上げるためのluaのフレームワーク）
- ## まだ楽になる(今後の実装予定。後述）

# デモ1
- ## 大事なところ
- ### アドレスはまだ指定します
- ### 呼び出し可能な関数は動的に簡単に指定できます
- ### connectとかしなくていいです（RPCを開始する時に自動的に接続する）

# デモ2
- ## 大事なところ
- ### 接続の状態管理をコールバックで行うことができます
- ### コールバックの中で簡単にクライアント・サーバーのhandshakeできます
- ### RPCの実行はhandshakeが終わるまで自動的に待ちます

# デモ3
- ## 大事なところ
- ### RPCで呼ばれる関数名に規約があり、呼び出し毎に柔軟に挙動を変えることができます
- ### RPCを呼び出した元へのリンク(yue.peer())を使うことで、RPCの実行中に呼び出し側から呼び出し元へRPCすることができます
- ### RPCの処理中に追加の情報を呼び出し側に問い合わせたくなった場合（キャラメイキングとか）などに直感的に処理を記述できるでしょう

# デモ４
- ## 大事なところ
- ### インポートしたライブラリのAPIを呼び出すような気軽さでサーバー間の連携を行えます
- ### ワーカスレッドに対してもほぼ同様の構文で実行できることに注目
- ### 複数スレッドをローカルで立ち上げれば、簡単に分散処理環境をエミュレート出来ます

# 技術的に何をやっているのか
- ## スクリプト側はLuaJIT
- ## C/C++で書かれたマルチスレッドサーバーで各スレッドがLuaJITのVMおよびイベントループを持っている
- ## signalとかtimerもあります
- ## ネイティブ部分を含めて全面的にfiber(cooperative thread)ベースのアーキテクチャ
- ## スレッド間はロックフリーなキューを通じてメッセージングでやりとり。パフォーマンス及びバグりにくさ

# LuaJIT?
- ## v8と同等かそれ以上に高速なluaのJITコンパイル処理系
- ## ffiが極めて重要
- ## サーバーでGPUを使う時代が来た場合ほとんどの言語と比べて圧倒的なアドバンテージが

# 今後の実装予定
- ## yue.nalloc
- ### yue.nalloc('10.0.0.1', 'kvs.lua')のような
- ### ライブラリをロードするときにそれを処理するためのマシンリソースをmallocのように割り当ててしまおうというアイデア
- ### もっと言うとawsやrightscaleのAPIで仮想マシンを作ってしまえばアドレスを前もって知る必要もないかも
- ### yue.nalloc(rightscale.new_node().address, 'kvs.lua')みたいな
- ### もしこうできればawsとかの使い方が全く変わってくる可能性が
- ### でもそんな難しくないと思う

# 今後の実装予定
- ## world synthesizer
- ### yueをベースにしたkvsのようなもの
- ### データを保持しつつRPCで任意のプログラムを実行してkvs内部でデータを更新できる
- ### GPUと連携した複雑なデータの更新(物理演算のような）

# MMOを超えて
- ## 現在のビッグデータの処理は計算的には極めて単純（個数のカウント、検索）
- ## たとえばセンサーからのデータでリアルタイム性の高い物理シミュレーションによる予測などは比べ物にならないほど複雑な処理
- ## おそらく将来GPUと連携する必要があるビッグデータの処理が現れる
- ## その用途にはyueはかなり有望なはず